# Система управления банковскими счетами

Этот репозиторий содержит два основных проекта: `BankAccountGateway` и `BankAccountService`, которые вместе образуют систему для управления банковскими счетами, используя gRPC для внутреннего взаимодействия.

## Обзор

- **BankAccountGateway**:  служит в качестве API-шлюза в системе управления банковскими счетами. Этот проект предназначен для предоставления интерфейса взаимодействия с пользователем через HTTP-запросы и делегирования этих запросов внутренним сервисам через gRPC. Основная цель BankAccountGateway - обеспечить абстракцию и безопасность взаимодействия клиентов с бизнес-логикой, реализованной в BankAccountService.

- **BankAccountService**: является основным бэкенд-сервисом, содержащим бизнес-логику системы управления банковскими счетами. Этот проект отвечает за обработку и управление данными, связанными с банковскими счетами, пользователями и их аутентификацией.

## Использованные технологии

- PostgreSQL
- .NET 6.0
- gRPC
- ASP.NET Web API
- JWT Token

## Начало работы

Вы можете использовать следующие скрипты sql для заполнения базы данных. Предварительно настройте подключение к БД в appsettings.json проекта BankAccountService. Тестовые ключи JWT и ClientIdKey для шифрования id клиента уже закомиченны предварительно.
Заполнение бд юзерами

```
INSERT INTO "Clients"  ("FullName", "PhoneNumber" , "PasswordHash" , "PasswordSalt")
VALUES
('User1', '+79999999999', 'passwordhash1', 'salt1'),
('User2', '+79999999999', 'passwordhash2', 'salt2'),
('User3', '+79999999999', 'passwordhash3', 'salt3');
```

Добавление аккаунтов
```
INSERT INTO "Accounts" ("AccountNumber", "AccountType", "ClientId")
VALUES
(12345678901, 0, 1),
(23456789012, 1, 1),
(34567890123, 2, 1),
(45678901234, 0, 1),
(56789012345, 1, 1),
(67890123456, 0, 2),
(78901234567, 1, 2),
(89012345678, 2, 2),
(90123456789, 0, 2),
(12345678901, 1, 2),
(23456789012, 0, 3),
(34567890123, 1, 3),
(45678901234, 2, 3),
(56789012345, 0, 3),
(67890123456, 1, 3);
```

## Использование

После запуска обоих сервисов вы можете взаимодействовать с системой через эндпоинты `BankAccountGateway`:

- **Аутентификация**: Аутентифицировать пользователей и регистрировать новые счета.
- **Детали счета**: Получать детали банковских счетов.

Для удобства исследования и взаимодействия с API включен Swagger UI.

## Архитектура

- **BankAccountGateway** использует ASP.NET Core для предоставления RESTful API, обрабатывает аутентификацию JWT и перенаправляет запросы в `BankAccountService` через gRPC.

- **BankAccountService** построен на ASP.NET Core и gRPC, обеспечивая высокопроизводительный интерфейс для слоя бизнес-логики и доступа к данным.


